<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Urban Den Invoice Generator</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background-color: #f4f4f4;
      padding: 20px;
    }
    h1 {
      font-family: 'Montserrat', sans-serif;
    }
    .input-row {
      margin-bottom: 10px;
    }
    .item-row {
      display: flex;
      gap: 5px;
      margin-bottom: 5px;
    }
    input, button {
      padding: 5px;
      font-size: 1rem;
    }
    button {
      background-color: #333;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background-color: #555;
    }
  </style>
</head>
<body>
  <h1>Urban Den Invoice Generator</h1>
  <div class="input-row">
    <label>Invoice Number: <input type="text" id="invoiceNumber"></label>
  </div>
  <div class="input-row">
    <label>Invoice Date: <input type="date" id="invoiceDate"></label>
    <label>Payment Date: <input type="date" id="paymentDate"></label>
  </div>
  <div class="input-row">
    <label>Bill To: <input type="text" id="billTo"></label>
  </div>
  <div class="input-row">
    <label>Address: <input type="text" id="address"></label>
  </div>
  <div class="input-row">
    <button onclick="addItem()">Add Item</button>
  </div>
  <div id="items"></div>
  <div class="input-row">
    <button onclick="generatePDF()">Download PDF</button>
  </div>

  <script>
    let itemCount = 0;
    function addItem() {
      const div = document.createElement('div');
      div.className = 'item-row';
      div.innerHTML = `
        <input class="desc" placeholder="Description">
        <input class="qty" type="number" placeholder="Qty">
        <input class="unit" placeholder="Unit">
        <input class="rate" type="number" placeholder="Rate">
      `;
      document.getElementById('items').appendChild(div);
    }

    const { jsPDF } = window.jspdf;

    function generatePDF() {
      const doc = new jsPDF();

      doc.setFillColor(185, 193, 178);
      doc.rect(0, 0, 210, 297, 'F'); // A4 size background

      const img = new Image();
      img.src = 'logo.png'; // your logo image name

      img.onload = function () {
        // Logo on the left (switched)
        doc.addImage(img, 'PNG', 14, 10, 50, 20);

        // Business info on the right (switched)
        doc.setFont('Montserrat', 'bold');
        doc.setFontSize(14);
        doc.text("Urban Den Holidays", 140, 20);

        doc.setFont('Roboto', 'normal');
        doc.setFontSize(8);
        doc.text("Harwan, Srinagar", 140, 27);
        doc.text("Email: urbandenholidays@gmail.com", 140, 32);
        doc.text("Phone: 6006771034", 140, 37);

        let y = 50;

        const invoiceNumber = document.getElementById('invoiceNumber').value;
        const invoiceDate = document.getElementById('invoiceDate').value;
        const paymentDate = document.getElementById('paymentDate').value;
        const billTo = document.getElementById('billTo').value;
        const address = document.getElementById('address').value;

        doc.setFont('Montserrat', 'bold');
        doc.setFontSize(14);
        doc.text("INVOICE", 105, y, { align: 'center' });
        y += 10;

        doc.setFont('Roboto', 'normal');
        doc.setFontSize(11);
        doc.text(`Invoice Number: ${invoiceNumber}`, 14, y); y += 7;
        doc.text(`Invoice Date: ${invoiceDate}`, 14, y); y += 7;
        doc.text(`Payment Date: ${paymentDate}`, 14, y); y += 14;

        doc.setFont('Montserrat', 'bold');
        doc.text("Bill To:", 14, y); y += 7;
        doc.setFont('Roboto', 'normal');
        doc.text(billTo, 14, y); y += 7;
        doc.text(address, 14, y); y += 10;

        const rows = [];
        const itemRows = document.querySelectorAll('.item-row');
        let total = 0;

        itemRows.forEach((row, index) => {
          const desc = row.querySelector('.desc').value;
          const qty = parseFloat(row.querySelector('.qty').value);
          const unit = row.querySelector('.unit').value;
          const rate = parseFloat(row.querySelector('.rate').value);
          const amount = qty * rate;
          total += amount;
          rows.push([index + 1, desc, qty, unit, rate.toFixed(2), amount.toFixed(2)]);
        });

        doc.autoTable({
          startY: y,
          head: [["Item #", "Description", "Quantity", "Unit", "Rate (INR)", "Amount (INR)"]],
          body: rows,
          styles: {
            font: "Roboto",
            fontSize: 10,
            cellPadding: 3
          },
          headStyles: { fillColor: [100, 100, 100], textColor: 255 },
        });

        const finalY = doc.lastAutoTable.finalY + 10;
        doc.setFont('Montserrat', 'bold');
        doc.text(`Total Amount Paid: INR ${total.toFixed(2)}`, 14, finalY);

        doc.setFont('Roboto', 'normal');
        doc.text("Thank you for choosing Urban Den Holidays!", 14, finalY + 10);
        doc.text("Payment Details:", 14, finalY + 20);
        doc.text("Account Name: Urban Den Holidays", 14, finalY + 27);
        doc.text("Account Number: 0100010100008211", 14, finalY + 34);
        doc.text("Bank Name: J&K Bank", 14, finalY + 41);
        doc.text("Branch/IFSC: JAKA0ALAMGI", 14, finalY + 48);
        doc.text("This invoice is computer generated â€“ No Signatures are required.", 14, finalY + 58);

        doc.save(`${invoiceNumber}.pdf`);
      };
    }
  </script>
</body>
</html>
