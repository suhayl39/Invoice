<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Urban Den Holidays Invoice Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #e3f2fd;
      margin: 0;
      padding: 0;
    }

    .container {
      max-width: 700px;
      margin: 30px auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
    }

    .logo-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .logo-header img {
      width: 120px;
    }

    h2 {
      text-align: center;
      margin-bottom: 10px;
      font-size: 24px;
      color: #1a237e;
    }

    label {
      font-weight: bold;
      font-size: 0.9rem;
      display: block;
      margin-bottom: 4px;
    }

    input, textarea, button {
      width: 100%;
      margin-bottom: 12px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }

    .items-container { margin-bottom: 15px; }
    .item-row { display: flex; gap: 10px; margin-bottom: 10px; flex-wrap: wrap; }
    .item-row input { flex: 1; min-width: 100px; }

    .add-btn {
      background-color: #0288d1;
      color: white;
      border: none;
    }

    .download-btn {
      background-color: #2e7d32;
      color: white;
      border: none;
      margin-top: 10px;
    }

    .brand-text {
      text-align: left;
      font-size: 12px;
      line-height: 1.6;
    }

    .brand-text strong {
      font-size: 14px;
      display: block;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo-header">
      <div class="brand-text">
        <strong>Urban Den Holidays</strong>
        Harwan, Srinagar<br>
        urbandenholidays@gmail.com<br>
        Phone: 6006771034
      </div>
      <img src="logo.png" alt="Urban Den Logo" />
    </div>

    <h2>Invoice Generator</h2>

    <label for="invoiceNumber">Invoice Number</label>
    <input id="invoiceNumber" placeholder="INV-UDH-2025-001" />

    <label for="invoiceDate">Invoice Date</label>
    <input id="invoiceDate" type="date" />

    <label for="paymentDate">Payment Date</label>
    <input id="paymentDate" type="date" />

    <label for="billTo">Customer Name</label>
    <input id="billTo" placeholder="Customer Name" />

    <label for="address">Customer Address</label>
    <input id="address" placeholder="Address" />

    <div class="items-container" id="items">
      <div class="item-row">
        <input placeholder="Description" class="desc" />
        <input type="number" placeholder="Qty" class="qty" />
        <input placeholder="Unit" class="unit" />
        <input type="number" placeholder="Rate" class="rate" />
      </div>
    </div>
    <button class="add-btn" onclick="addItem()">Add Item</button>
    <button class="download-btn" onclick="generatePDF()">Download PDF</button>
  </div>

  <script>
    const { jsPDF } = window.jspdf;

    function addItem() {
      const container = document.getElementById('items');
      const row = document.createElement('div');
      row.classList.add('item-row');
      row.innerHTML = `
        <input placeholder="Description" class="desc" />
        <input type="number" placeholder="Qty" class="qty" />
        <input placeholder="Unit" class="unit" />
        <input type="number" placeholder="Rate" class="rate" />
      `;
      container.appendChild(row);
    }

    function generatePDF() {
      const doc = new jsPDF();
      const logo = new Image();
      logo.src = 'logo.png';

      logo.onload = () => {
        // Header: Name left, Logo right
        doc.setFontSize(12);
        doc.setFont('helvetica', 'bold');
        doc.text("Urban Den Holidays", 14, 14);
        doc.setFontSize(9);
        doc.setFont('helvetica', 'normal');
        doc.text("Harwan, Srinagar", 14, 20);
        doc.text("urbandenholidays@gmail.com", 14, 26);
        doc.text("Phone: 6006771034", 14, 32);
        doc.addImage(logo, 'PNG', 160, 10, 40, 20);

        // Title
        let y = 42;
        doc.setFontSize(13);
        doc.setFont(undefined, 'bold');
        doc.text("INVOICE", 105, y, { align: 'center' });
        doc.setLineWidth(0.5);
        doc.line(14, y + 2, 196, y + 2);
        y += 10;

        const invoiceNumber = document.getElementById('invoiceNumber').value;
        const invoiceDate = document.getElementById('invoiceDate').value;
        const paymentDate = document.getElementById('paymentDate').value;
        const billTo = document.getElementById('billTo').value;
        const address = document.getElementById('address').value;

        doc.setFontSize(10);
        doc.setFont(undefined, 'bold');
        doc.text("Invoice Number:", 14, y);
        doc.setFont(undefined, 'normal');
        doc.text(invoiceNumber, 50, y);

        y += 7;
        doc.setFont(undefined, 'bold');
        doc.text("Invoice Date:", 14, y);
        doc.setFont(undefined, 'normal');
        doc.text(invoiceDate, 50, y);

        y += 7;
        doc.setFont(undefined, 'bold');
        doc.text("Payment Date:", 14, y);
        doc.setFont(undefined, 'normal');
        doc.text(paymentDate, 50, y);

        y += 14;
        doc.setFont(undefined, 'bold');
        doc.text("Bill To:", 14, y);
        y += 7;
        doc.setFont(undefined, 'normal');
        doc.text(billTo, 14, y);
        y += 7;
        doc.text(address, 14, y);
        y += 10;

        const rows = [];
        let total = 0;
        document.querySelectorAll('.item-row').forEach((row, i) => {
          const desc = row.querySelector('.desc').value;
          const qty = parseFloat(row.querySelector('.qty').value);
          const unit = row.querySelector('.unit').value;
          const rate = parseFloat(row.querySelector('.rate').value);
          const amount = qty * rate;
          total += amount;
          rows.push([i + 1, desc, qty, unit, rate.toFixed(2), amount.toFixed(2)]);
        });

        doc.autoTable({
          startY: y,
          head: [["#", "Description", "Qty", "Unit", "Rate (INR)", "Amount (INR)"]],
          body: rows,
          theme: 'grid',
          styles: { fontSize: 9 },
          headStyles: {
            fillColor: [255, 255, 255],
            textColor: [0, 0, 0],
            lineColor: [0, 0, 0],
            lineWidth: 0.5,
            fontStyle: 'bold',
          }
        });

        let endY = doc.lastAutoTable.finalY + 10;
        doc.setFont(undefined, 'bold');
        doc.text(`Total Amount Due: INR ${total.toFixed(2)}`, 14, endY);

        endY += 10;
        doc.setFont(undefined, 'bold');
        doc.text("Payment Details:", 14, endY);
        doc.setFont(undefined, 'normal');
        doc.text("Account Name: Urban Den Holidays", 14, endY + 7);
        doc.text("Account Number: 0100010100008211", 14, endY + 14);
        doc.text("Bank Name: J&K Bank", 14, endY + 21);
        doc.text("Branch/IFSC: JAKA0ALAMGI", 14, endY + 28);

        // Receipt Section
        endY += 40;
        doc.setLineWidth(0.5);
        doc.line(14, endY, 196, endY);
        endY += 10;
        doc.setFontSize(13);
        doc.setFont(undefined, 'bold');
        doc.text("RECEIPT", 105, endY, { align: 'center' });
        doc.line(14, endY + 2, 196, endY + 2);
        endY += 12;

        doc.setFontSize(10);
        doc.setFont(undefined, 'bold');
        doc.text("Paid By:", 14, endY);
        doc.setFont(undefined, 'normal');
        doc.text(billTo, 40, endY);

        endY += 7;
        doc.setFont(undefined, 'bold');
        doc.text("Address:", 14, endY);
        doc.setFont(undefined, 'normal');
        doc.text(address, 40, endY);

        endY += 7;
        doc.setFont(undefined, 'bold');
        doc.text("Amount Paid:", 14, endY);
        doc.setFont(undefined, 'normal');
        doc.text(`INR ${total.toFixed(2)}`, 40, endY);

        endY += 7;
        doc.setFont(undefined, 'bold');
        doc.text("Payment Date:", 14, endY);
        doc.setFont(undefined, 'normal');
        doc.text(paymentDate, 40, endY);

        // Final Thank you (centered, bold, big)
        endY += 20;
        doc.setFontSize(12);
        doc.setFont(undefined, 'bold');
        doc.text("Thank you for choosing Urban Den Holidays!", 105, endY, { align: 'center' });

        // Footer note at the bottom
        doc.setFontSize(8);
        doc.setFont(undefined, 'normal');
        doc.text("This invoice is computer generated â€“ No Signatures are required.", 105, 285, { align: 'center' });

        doc.save(`${invoiceNumber}.pdf`);
      };
    }
  </script>
</body>
</html>
