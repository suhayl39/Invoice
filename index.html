<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Urban Den Holidays Invoice</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; }
    .container { max-width: 600px; margin: auto; background: #fff; padding: 20px; border-radius: 8px; }
    input, button { width: 100%; padding: 10px; margin: 10px 0; border-radius: 4px; border: 1px solid #ccc; }
    .item-row { display: flex; gap: 10px; margin-bottom: 10px; }
    .item-row input { flex: 1; }
    .add-btn { background: #28a745; color: white; }
    .download-btn { background: #007bff; color: white; }
  </style>
</head>
<body>
  <div class="container">
    <h2>Urban Den Holidays - Invoice</h2>
    <input id="invoiceNumber" placeholder="Invoice Number" />
    <input id="invoiceDate" type="date" placeholder="Invoice Date" />
    <input id="paymentDate" type="date" placeholder="Payment Date" />
    <input id="billTo" placeholder="Customer Name" />
    <input id="address" placeholder="Address" />
    <div id="items">
      <div class="item-row">
        <input class="desc" placeholder="Description" />
        <input class="qty" type="number" placeholder="Qty" />
        <input class="unit" placeholder="Unit" />
        <input class="rate" type="number" placeholder="Rate" />
      </div>
    </div>
    <button class="add-btn" onclick="addItem()">Add Item</button>
    <button class="download-btn" onclick="generatePDF()">Download PDF</button>
  </div>

  <script>
    const { jsPDF } = window.jspdf;

    function addItem() {
      const row = document.createElement('div');
      row.className = 'item-row';
      row.innerHTML = `
        <input class="desc" placeholder="Description" />
        <input class="qty" type="number" placeholder="Qty" />
        <input class="unit" placeholder="Unit" />
        <input class="rate" type="number" placeholder="Rate" />
      `;
      document.getElementById('items').appendChild(row);
    }

    function generatePDF() {
      const doc = new jsPDF();
      const logo = new Image();
      logo.src = 'logo.png';

      const buildPDF = () => {
        doc.setFont('helvetica');
        doc.setFontSize(10);

        // Company Details (Right)
        doc.setFontSize(14);
        doc.setFont(undefined, 'bold');
        doc.text("Urban Den Holidays", 60, 20);
        doc.setFontSize(10);
        doc.setFont(undefined, 'normal');
        doc.text("Harwan, Srinagar.", 60, 26);
        doc.text("urbandenholidays@gmail.com", 60, 32);
        doc.text("Phone: 6006771034", 60, 38);

        // Invoice Title
        doc.setFontSize(12);
        doc.setFont(undefined, 'bold');
        doc.text("INVOICE", 105, 50, { align: 'center' });
        doc.setDrawColor(0);
        doc.line(14, 52, 196, 52); // underline

        // Invoice Info
        doc.setFontSize(10);
        doc.setFont(undefined, 'bold');
        let y = 60;
        doc.text("Invoice Number:", 14, y);
        doc.setFont(undefined, 'normal');
        doc.text(document.getElementById('invoiceNumber').value || "", 60, y);

        y += 7;
        doc.setFont(undefined, 'bold');
        doc.text("Invoice Date:", 14, y);
        doc.setFont(undefined, 'normal');
        doc.text(document.getElementById('invoiceDate').value || "", 60, y);

        y += 7;
        doc.setFont(undefined, 'bold');
        doc.text("Payment Date:", 14, y);
        doc.setFont(undefined, 'normal');
        doc.text(document.getElementById('paymentDate').value || "", 60, y);

        // Bill To
        y += 14;
        doc.setFont(undefined, 'bold');
        doc.text("Bill To:", 14, y);
        y += 6;
        doc.setFont(undefined, 'normal');
        doc.text(document.getElementById('billTo').value || "", 14, y);
        y += 6;
        doc.text(document.getElementById('address').value || "", 14, y);

        // Table
        const items = [];
        let total = 0;
        document.querySelectorAll('.item-row').forEach((row, index) => {
          const desc = row.querySelector('.desc').value;
          const qty = parseFloat(row.querySelector('.qty').value || 0);
          const unit = row.querySelector('.unit').value;
          const rate = parseFloat(row.querySelector('.rate').value || 0);
          const amount = qty * rate;
          total += amount;
          items.push([index + 1, desc, qty, unit, rate.toFixed(2), amount.toFixed(2)]);
        });

        doc.autoTable({
          startY: y + 10,
          head
